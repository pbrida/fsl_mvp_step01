import sys
from genericpath import (
    ALLOW_MISSING as ALLOW_MISSING,
)
from genericpath import (
    _AllowMissingType,
)
from genericpath import (
    commonprefix as commonprefix,
)
from genericpath import (
    exists as exists,
)
from genericpath import (
    getatime as getatime,
)
from genericpath import (
    getctime as getctime,
)
from genericpath import (
    getmtime as getmtime,
)
from genericpath import (
    getsize as getsize,
)
from genericpath import (
    isdir as isdir,
)
from genericpath import (
    isfile as isfile,
)
from genericpath import (
    samefile as samefile,
)
from genericpath import (
    sameopenfile as sameopenfile,
)
from genericpath import (
    samestat as samestat,
)
from os import PathLike

# Re-export common definitions from posixpath to reduce duplication
from posixpath import (
    abspath as abspath,
)
from posixpath import (
    basename as basename,
)
from posixpath import (
    commonpath as commonpath,
)
from posixpath import (
    curdir as curdir,
)
from posixpath import (
    defpath as defpath,
)
from posixpath import (
    devnull as devnull,
)
from posixpath import (
    dirname as dirname,
)
from posixpath import (
    expanduser as expanduser,
)
from posixpath import (
    expandvars as expandvars,
)
from posixpath import (
    extsep as extsep,
)
from posixpath import (
    isabs as isabs,
)
from posixpath import (
    islink as islink,
)
from posixpath import (
    ismount as ismount,
)
from posixpath import (
    lexists as lexists,
)
from posixpath import (
    normcase as normcase,
)
from posixpath import (
    normpath as normpath,
)
from posixpath import (
    pardir as pardir,
)
from posixpath import (
    pathsep as pathsep,
)
from posixpath import (
    relpath as relpath,
)
from posixpath import (
    sep as sep,
)
from posixpath import (
    split as split,
)
from posixpath import (
    splitdrive as splitdrive,
)
from posixpath import (
    splitext as splitext,
)
from posixpath import (
    supports_unicode_filenames as supports_unicode_filenames,
)
from typing import AnyStr, overload

from _typeshed import BytesPath, StrOrBytesPath, StrPath
from typing_extensions import LiteralString

if sys.version_info >= (3, 12):
    from posixpath import isjunction as isjunction
    from posixpath import splitroot as splitroot
if sys.version_info >= (3, 13):
    from genericpath import isdevdrive as isdevdrive

__all__ = [
    "normcase",
    "isabs",
    "join",
    "splitdrive",
    "split",
    "splitext",
    "basename",
    "dirname",
    "commonprefix",
    "getsize",
    "getmtime",
    "getatime",
    "getctime",
    "islink",
    "exists",
    "lexists",
    "isdir",
    "isfile",
    "ismount",
    "expanduser",
    "expandvars",
    "normpath",
    "abspath",
    "curdir",
    "pardir",
    "sep",
    "pathsep",
    "defpath",
    "altsep",
    "extsep",
    "devnull",
    "realpath",
    "supports_unicode_filenames",
    "relpath",
    "samefile",
    "sameopenfile",
    "samestat",
    "commonpath",
    "ALLOW_MISSING",
]
if sys.version_info >= (3, 12):
    __all__ += ["isjunction", "splitroot"]
if sys.version_info >= (3, 13):
    __all__ += ["isdevdrive", "isreserved"]

altsep: LiteralString

# First parameter is not actually pos-only,
# but must be defined as pos-only in the stub or cross-platform code doesn't type-check,
# as the parameter name is different in posixpath.join()
@overload
def join(path: LiteralString, /, *paths: LiteralString) -> LiteralString: ...
@overload
def join(path: StrPath, /, *paths: StrPath) -> str: ...
@overload
def join(path: BytesPath, /, *paths: BytesPath) -> bytes: ...

if sys.platform == "win32":
    @overload
    def realpath(path: PathLike[AnyStr], *, strict: bool | _AllowMissingType = False) -> AnyStr: ...
    @overload
    def realpath(path: AnyStr, *, strict: bool | _AllowMissingType = False) -> AnyStr: ...

else:
    realpath = abspath

if sys.version_info >= (3, 13):
    def isreserved(path: StrOrBytesPath) -> bool: ...
