import sys
from datetime import datetime

from typing_extensions import Self

from ._common import tzrangebase
from .tz import (
    datetime_ambiguous as datetime_ambiguous,
)
from .tz import (
    datetime_exists as datetime_exists,
)
from .tz import (
    enfold as enfold,
)
from .tz import (
    gettz as gettz,
)
from .tz import (
    resolve_imaginary as resolve_imaginary,
)
from .tz import (
    tzfile as tzfile,
)
from .tz import (
    tzical as tzical,
)
from .tz import (
    tzlocal as tzlocal,
)
from .tz import (
    tzoffset as tzoffset,
)
from .tz import (
    tzrange as tzrange,
)
from .tz import (
    tzstr as tzstr,
)
from .tz import (
    tzutc as tzutc,
)

# UTC, tzwin, tzwinlocal are defined in this class
# otherwise pyright complains about unknown import symbol:
if sys.platform == "win32":
    class tzwinbase(tzrangebase):
        hasdst: bool
        def __eq__(self, other: tzwinbase) -> bool: ...  # type: ignore[override]
        @staticmethod
        def list() -> list[str]: ...
        def display(self) -> str | None: ...
        def transitions(self, year: int) -> tuple[datetime, datetime] | None: ...

    class tzwin(tzwinbase):
        hasdst: bool
        def __init__(self, name: str) -> None: ...
        def __reduce__(self) -> tuple[type[Self], tuple[str, ...]]: ...  # type: ignore[override]

    class tzwinlocal(tzwinbase):
        hasdst: bool
        def __init__(self) -> None: ...
        def __reduce__(self) -> tuple[type[Self], tuple[str, ...]]: ...  # type: ignore[override]

else:
    tzwin: None
    tzwinlocal: None

UTC: tzutc

__all__ = [
    "tzutc",
    "tzoffset",
    "tzlocal",
    "tzfile",
    "tzrange",
    "tzstr",
    "tzical",
    "tzwin",
    "tzwinlocal",
    "gettz",
    "enfold",
    "datetime_ambiguous",
    "datetime_exists",
    "resolve_imaginary",
    "UTC",
    "DeprecatedTzFormatWarning",
]

class DeprecatedTzFormatWarning(Warning): ...
